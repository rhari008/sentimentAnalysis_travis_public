'use strict';

var userInput = require('./lib/user-input');
var InstanceManager = require('./lib/InstanceManager');

exports.create = function (options, callback) {
  var opts = userInput.processMainOptions(options);

  var instanceManager = new InstanceManager(opts);
  instanceManager._fillInCache(function (err) {
    if (err) {
      return callback(err);
    }
    callback(null, instanceManager);
  });
};
